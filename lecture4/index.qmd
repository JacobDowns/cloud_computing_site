---
title: "Brief Intro to Authorization, and Firestore"
---

::: {.callout-note collapse="false"}
## agenda.txt

In [Lab 1](../lab1/index.qmd) you deployed a pretty basic app. [Lab 2](../lab2/index.qmd) will focus on deploying a more complex, feature-rich app on Firebase.

**Goal:** understand what you’re about to build and *why it matters*.

1.  What you’ll build today
2.  Authentication vs Authorization
3.  Firebase Auth at a glance (Google provider)
4.  What Firestore is (and how it differs from SQL)
5.  Where the code lives (React + Vite quick orientation)
:::

## What you will build

::: {.callout-important collapse="false"}
## cloud-notes.exe — The app for Lab 2

You will build and deploy a small web app called **Cloud Notes**. Its main features include:

-   User sign in with **Google**
-   Ability to create user specific notes
-   Permanent storage of notes in Firestore
:::

## Authentication vs Authorization

We will implement both authentication and authorization in our app.

::: {.callout-tip collapse="false"}
## auth.dll

-   **Authentication**: *Who are you?*\
    Example: “This user is Jacob (or has Google identity X).”

-   **Authorization**: *What are you allowed to do?*\
    Example: “This user may only read/write notes that belong to them.”

Key point: **You can be authenticated but not authorized.**
:::

::: {.callout-tip collapse="false"}
## auth.png

![](images/auth.png){fig-align="center"}
:::

::: {.callout-tip collapse="false"}
## Security

If “security” only exists in your **frontend UI**, you do not have security.

In cloud systems:\
**Clients can ask. Servers decide.**
:::

## Firebase Authentication at a glance (Google provider)

::: {.callout-note collapse="false"}
## firebase-auth.exe — What Firebase handles for you

When you enable the **Google provider** in Firebase Auth:

-   users click **Sign in with Google**
-   Google verifies the identity
-   Firebase returns a signed-in user object (including a stable `uid`)
-   the browser stores a session token so refreshes stay signed-in

You do **not** need to run your own auth server for this lab.
:::

### What you will use in code

::: {.callout-note collapse="false"}
## sdk.txt — The 3 core “auth flows” in this lab

In the app you will implement:

1.  **Sign in** (Google popup)
2.  **Sign out**
3.  **Session / auth-state listener** (keep UI in sync across refresh)

Firebase provides these primitives; your React UI calls them.
:::

## What is Firestore?

::: {.callout-note collapse="false"}
## firestore.exe — A cloud-native database

**Cloud Firestore** is a managed, document-oriented **NoSQL database**.

Data is stored as:

-   **collections** (like folders)
-   containing **documents** (JSON-like objects)

Example “notes” collection:

```         
notes (collection)
  <doc-id> (document)
    uid: "someUserUid"
    text: "hello"
    createdAt: <timestamp>
```

-   Firestore is designed to be used **directly from frontend apps**, but that makes **rules** essential.
-   Rules determine who is authorized to do what with the database
:::

## Firestore vs a traditional SQL database

::: {.callout-important collapse="false"}
## compare.exe — Different mental models

Firestore and SQL solve overlapping problems, but they encourage different designs.
:::

| Topic | Traditional SQL (e.g., PostgreSQL) | Firestore |
|------------------------|------------------------|------------------------|
| Data shape | **Tables** with rows & columns | **Collections** of JSON-like documents |
| Schema | Defined up front (columns, types) | Flexible; structure emerges from usage |
| Joins | Common & powerful | No joins; often duplicate data |
| Typical access | Browser → backend → DB | Browser → Firestore (client SDK) |
| Security | Network + backend logic | Security Rules |
| Scaling | Often vertical + tuning | Designed for horizontal scaling |
| Real-time | Usually requires extra infra | Built-in real-time listeners |

::: {.callout-note collapse="false"}
## vite.exe — What Vite is doing

We'll again use Vite for the front end UI. Interestingly, with the Firebase SDK, we can perform queries to Firestore and other operations in React directly. No server side code necessary.

Reminders:

-   `npm run dev` starts a local dev server
-   `npm run build` produces production files in `dist/`
-   Firebase Hosting deploys **`dist/`**, not your source code
:::

::: {.callout-note collapse="false"}
## folders.txt — The files you’ll touch

You will mostly edit:

-   `src/firebase.ts` — initialize Firebase and export `auth` + `db`
-   `src/auth.ts` — helper functions for Google sign-in/out + auth listener
-   `src/notes.ts` — Firestore helpers (add note, subscribe to notes)
-   `src/App.tsx` — UI: login view + notes view + demo toggle
-   `.env.local` — Firebase config values (not committed)

**If you are new to React:** don’t worry — this lab is not about “React mastery.”\
We’ll keep the UI minimal so you can focus on cloud concepts.
:::